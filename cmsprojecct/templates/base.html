{% extends "bootstrap5/base.html" %}
{% load cms_tags menu_tags sekizai_tags %}

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css"/>
<title>{% block title %}My Website{% endblock title %}</title>
<style type="text/css">
.nav {
padding-left: 0;
}
.nav li {
display: inline;
list-style-type: none;
padding-right: 20px;
}
.container {
width: 940px;
margin: 0 auto;
}
.content {
width: 80%;
float: left;
}
.sidebar {
width: 20%;
float: left;
}

/* ===== Reels grid - robust version ===== */
.reels-container {
  display: grid;
  /* minmax(0, 1fr) prevents children from forcing column min-widths */
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 20px;
  padding: 20px;
  width: 100%;
  box-sizing: border-box;
  justify-items: center; /* center each grid item horizontally */
  align-items: start;
}

/* Force each grid child to be able to shrink */
.reel {
  width: 100%;
  max-width: 360px; /* control tile width so grid stays even */
  min-width: 0;     /* VERY IMPORTANT to allow shrinking in CSS Grid */
  box-sizing: border-box;
  margin: 0;
}

/* Ensure the raw embed wrapper is fluid */
.reel .embed-code,
.reel .embed-code * {
  box-sizing: border-box !important;
  width: 100% !important;
  max-width: 100% !important;
  min-width: 0 !important;
}

/* Neutralize Instagram injected inline styles (calc/min-width/max-width) */
.reel blockquote.instagram-media,
.reel blockquote.instagram-media[style] {
  display: block !important;
  width: 100% !important;
  max-width: 100% !important;
  min-width: 0 !important;
  margin: 0 auto !important;
  padding: 0 !important;
}

/* Make any iframes inside the embeds fluid */
.reel iframe,
.reel iframe * {
  width: 100% !important;
  max-width: 100% !important;
  height: auto !important;
  min-width: 0 !important;
  box-sizing: border-box !important;
}

/* Tiktok wrapper specifics (they sometimes wrap in div/iframe) */
.reel .tiktok-embed,
.reel .tiktok-embed > iframe,
.reel .tiktok-embed > div {
  width: 100% !important;
  max-width: 100% !important;
  min-width: 0 !important;
  box-sizing: border-box !important;
}

/* Optional: keep vertical reels visually balanced */
.reel iframe {
  aspect-ratio: 9 / 16;
  max-height: 80vh;
}

/* Responsive */
@media (max-width: 1024px) {
  .reels-container { grid-template-columns: repeat(2, minmax(0, 1fr)); }
}
@media (max-width: 600px) {
  .reels-container { grid-template-columns: 1fr; }
  .reel { max-width: 560px; } /* phone-friendly maximum */
}
</style>
{% render_block "css" %}
</head>
<body>
{% cms_toolbar %}
<div class="container">
<ul class="nav">
<li><a href="/">Home Page</a></li>
<li><a href="/en/terms-of-service/">Terms of Service</a></li>
<li><a href="/en/privacy-policy/">Privacy Policy</a></li>

{% if request.user.is_authenticated %}
<li><a href="/en/employees/">Employees</a></li>
<li><a href="/en/currency-calculator/">Currency Calculator</a></li>
{% endif %}
</ul>

{% block content %}
{% placeholder "content" %}
{% endblock content %}
</div>

{% render_block "js" %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>
<!-- Instagram & TikTok embed scripts (include once on the page)  -->
<script async src="//www.instagram.com/embed.js"></script>
<script async src="https://www.tiktok.com/embed.js"></script>

<script>
function reprocessEmbeds(){
  try {
    if (window.instgrm && instgrm.Embeds && typeof instgrm.Embeds.process === 'function') {
      instgrm.Embeds.process();
    }
  } catch(e) {}
  // TikTok script usually self-initializes; if you need more, we can add more handlers.
}

document.addEventListener('DOMContentLoaded', function(){
  reprocessEmbeds();

  // When CMS editing adds/removes plugins, DOM changes â€” reprocess embeds automatically:
  var container = document.querySelector('.reels-container');
  if (container && window.MutationObserver) {
    var mo = new MutationObserver(function(){ reprocessEmbeds(); });
    mo.observe(container, { childList: true, subtree: true });
  }
});
</script>
</body>
</html>
