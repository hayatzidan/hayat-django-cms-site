{% extends "bootstrap5/base.html" %}
{% load cms_tags menu_tags sekizai_tags %}

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css"/>
<title>{% block title %}My Website{% endblock title %}</title>
<style type="text/css">
.nav {
padding-left: 0;
}
.nav li {
display: inline;
list-style-type: none;
padding-right: 20px;
}
.container {
width: 940px;
margin: 0 auto;
}
.content {
width: 80%;
float: left;
}
.sidebar {
width: 20%;
float: left;
}

/* Reels grid container */
.reels-container {
  display: grid;
  grid-template-columns: repeat(3, 1fr); /* 3 equal columns */
  gap: 20px;
  padding: 20px;
  background: red; /* just for testing the grid area */
  box-sizing: border-box;
}

/* Each reel box */
.reel {
  background: white; /* website background (your white part) */
  padding: 10px;
  box-sizing: border-box;
  display: flex;
  justify-content: center; /* center embed inside */
  align-items: flex-start;
}

/* Force Instagram embeds to fit */
.reel blockquote.instagram-media,
.reel iframe.instagram-media {
  width: 100% !important;
  max-width: 100% !important;
  min-width: 0 !important;
  margin: 0 auto !important;
}

/* Force TikTok embeds to fit */
.reel .tiktok-embed,
.reel iframe.tiktok-embed {
  width: 100% !important;
  max-width: 100% !important;
  min-width: 0 !important;
  margin: 0 auto !important;
}

/* ✅ Responsive breakpoints */
@media (max-width: 900px) {
  .reels-container { grid-template-columns: repeat(2, 1fr); }
}
@media (max-width: 600px) {
  .reels-container { grid-template-columns: 1fr; }
}

</style>
{% render_block "css" %}
</head>
<body>
{% cms_toolbar %}
<div class="container">
<ul class="nav">
<li><a href="/">Home Page</a></li>
<li><a href="/en/terms-of-service/">Terms of Service</a></li>
<li><a href="/en/privacy-policy/">Privacy Policy</a></li>

{% if request.user.is_authenticated %}
<li><a href="/en/employees/">Employees</a></li>
<li><a href="/en/currency-calculator/">Currency Calculator</a></li>
{% endif %}
</ul>

{% block content %}
{% placeholder "content" %}
{% endblock content %}
</div>

{% render_block "js" %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>
<!-- Instagram & TikTok embed scripts (include once on the page)  -->
<script async src="//www.instagram.com/embed.js"></script>
<script async src="https://www.tiktok.com/embed.js"></script>

<script>
function reprocessEmbeds(){
  try {
    if (window.instgrm && instgrm.Embeds && typeof instgrm.Embeds.process === 'function') {
      instgrm.Embeds.process();
    }
  } catch(e) {}
  // TikTok script usually self-initializes; if you need more, we can add more handlers.
}

document.addEventListener('DOMContentLoaded', function(){
  reprocessEmbeds();

  // When CMS editing adds/removes plugins, DOM changes — reprocess embeds automatically:
  var container = document.querySelector('.reels-container');
  if (container && window.MutationObserver) {
    var mo = new MutationObserver(function(){ reprocessEmbeds(); });
    mo.observe(container, { childList: true, subtree: true });
  }
});
</script>
</body>
</html>
